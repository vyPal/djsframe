<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>commands/command.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="FrameClient.html">FrameClient</a><ul class='methods'><li data-type='method'><a href="FrameClient.html#setDispatcher">setDispatcher</a></li><li data-type='method'><a href="FrameClient.html#setRegistry">setRegistry</a></li></ul></li><li></li><li><a href="FrameCommand.html">FrameCommand</a><ul class='methods'><li data-type='method'><a href="FrameCommand.html#run">run</a></li><li data-type='method'><a href="FrameCommand.html#validateInfo">validateInfo</a></li></ul></li><li></li><li><a href="FrameDispatcher.html">FrameDispatcher</a><ul class='methods'><li data-type='method'><a href="FrameDispatcher.html#handleCommand">handleCommand</a></li><li data-type='method'><a href="FrameDispatcher.html#handleMessage">handleMessage</a></li><li data-type='method'><a href="FrameDispatcher.html#handleSlash">handleSlash</a></li></ul></li><li></li><li><a href="FrameGroup.html">FrameGroup</a></li><li></li><li><a href="FrameRegistry.html">FrameRegistry</a><ul class='methods'><li data-type='method'><a href="FrameRegistry.html#registerCommand">registerCommand</a></li><li data-type='method'><a href="FrameRegistry.html#registerCommands">registerCommands</a></li><li data-type='method'><a href="FrameRegistry.html#registerCommandsInDir">registerCommandsInDir</a></li><li data-type='method'><a href="FrameRegistry.html#registerDefaultCommands">registerDefaultCommands</a></li><li data-type='method'><a href="FrameRegistry.html#registerDefaultGroups">registerDefaultGroups</a></li><li data-type='method'><a href="FrameRegistry.html#registerDefaults">registerDefaults</a></li><li data-type='method'><a href="FrameRegistry.html#registerGroup">registerGroup</a></li><li data-type='method'><a href="FrameRegistry.html#registerGroups">registerGroups</a></li><li data-type='method'><a href="FrameRegistry.html#setCommandDir">setCommandDir</a></li></ul></li><li></li><li><a href="SQLiteProvider.html">SQLiteProvider</a><ul class='methods'><li data-type='method'><a href="SQLiteProvider.html#.getGuildID">getGuildID</a></li><li data-type='method'><a href="SQLiteProvider.html#clear">clear</a></li><li data-type='method'><a href="SQLiteProvider.html#destroy">destroy</a></li><li data-type='method'><a href="SQLiteProvider.html#get">get</a></li><li data-type='method'><a href="SQLiteProvider.html#init">init</a></li><li data-type='method'><a href="SQLiteProvider.html#remove">remove</a></li><li data-type='method'><a href="SQLiteProvider.html#set">set</a></li><li data-type='method'><a href="SQLiteProvider.html#updateOtherShards">updateOtherShards</a></li></ul></li></ul><h3>Externals</h3><ul><li><a href="external-SQLiteDatabase.html">SQLiteDatabase</a></li><li><a href="external-SQLiteStatement.html">SQLiteStatement</a></li></ul><h3>Events</h3><ul><li><a href="FrameClient.html#event:commandRegister">commandRegister</a></li><li><a href="FrameClient.html#event:groupRegister">groupRegister</a></li><li><a href="FrameClient.html#event:setCommandDir">setCommandDir</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<div id="main">
    
    <h1 class="page-title">commands/command.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Class for creating a new command
 * @class FrameCommand
 */
class FrameCommand {
  /**
   * The information about the command
   * @typedef {Object} CommandInfo
   * @property {String} name - The name of the command (only lower-case)
   * @property {Array&lt;String>} [aliases=[]] - The aliases for the command
   * @property {String} group - The group for the command
   * @property {String} memberName - The display name of the command (can include special characters)
   * @property {String} description - The description of the command
   * @property {String} [details=""] - A detailed description of the command
   * @property {Array&lt;String>} [examples=[]] - A list of examples for the command
   * @property {Array&lt;String>} [clientPermissions=[]] - A list of permissions that the client has to have
   * @property {Array&lt;String>} [userPermissions=[]] - A list of permissions that the user has to have
   */

  /**
   * Creates the command instance
   * @constructor
   * @param {FrameClient} client - The client to bind the command to
   * @param {CommandInfo} info - The info about the command
   */
  constructor(client, info) {
    this.validateInfo(client, info);

    /**
     * The client to be used for this command
     * @name FrameCommand#client
     * @type {FrameClient}
     * @readonly
     */
    Object.defineProperty(this, 'client', {value: client});

    /**
     * The command's information
     * @name FrameCommand#info
     * @type {CommandInfo}
     * @readonly
     */
    Object.defineProperty(this, 'info', {value: info});

    /**
     * The command name
     * @type {String}
     * @readonly
     */
    this.name = info.name;

    /**
     * The command aliases
     * @type {Array&lt;String>}
     * @readonly
     * @default []
     */
    this.aliases = info.aliases || [];

    /**
     * The command group
     * @type {String}
     * @readonly
     */
    this.group = info.group;

    /**
     * The command memberName (the name that is shown for example in the help menu)
     * @type {String}
     * @readonly
     */
    this.memberName = info.memberName;

    /**
     * The command description
     * @type {String}
     * @readonly
     */
    this.description = info.description;

    /**
     * The command details (detailed description displayed in the help menu)
     * @type {String}
     * @readonly
     * @default ''
     */
    this.details = info.details || '';

    /**
     * The command examples (examples of how to use the command)
     * @type {Array&lt;String>}
     * @readonly
     * @default []
     */
    this.examples = info.examples || [];
  }

  /**
   * Validates the provided client and info to check for any errors
   * @param {FrameClient} client - The client that the command was created with
   * @param {CommandInfo} info - The info to validate
   */
  validateInfo(client, info) {
    if(!client) throw new Error('A client must be defined');
    if(typeof info !== 'object') throw new Error('Command info must be specified');
    if(typeof info.name !== 'string') throw new Error('Command name must be a string');
    if(info.name !== info.name.toLowerCase()) throw new Error('Command name must be lower case');
    if(info.aliases &amp;&amp; (!Array.isArray(info.aliases) || info.aliases.some(ali => typeof ali !== 'string'))) throw new Error('Command aliases must be an Array of strings');
    if(!info.group) throw new Error('A Command group must be specified');
    if(info.group !== info.group.toLowerCase()) throw new Error('Command group must be lower case');
    if(!client.registry.groups.has(info.group)) throw new Error('The specified group id does not exist');
    if(!info.memberName) throw new Error('A Command memberName must be specified');
    if(typeof info.memberName !== 'string') throw new Error('Command memberName must be a string');
    if(!info.description || typeof info.description !== 'string') throw new Error('A Command description must be specified');
    if(typeof info.description !== 'string') throw new Error('Command description must be a string');
    if(info.details &amp;&amp; typeof info.details !== 'string') throw new Error('Command details must be a string');
    if(info.examples &amp;&amp; (!Array.isArray(info.examples) || info.examples.some(ex => typeof ex !== 'string'))) throw new Error('Command examples must be an Array of strings');
    if(info.clientPermissions) {
			if(!Array.isArray(info.clientPermissions)) {
				throw new TypeError('Command clientPermissions must be an Array of permission key strings.');
			}
			for(const perm of info.clientPermissions) {
				if(!permissions[perm]) throw new RangeError(`Invalid command clientPermission: ${perm}`);
			}
		}
		if(info.userPermissions) {
			if(!Array.isArray(info.userPermissions)) {
				throw new TypeError('Command userPermissions must be an Array of permission key strings.');
			}
			for(const perm of info.userPermissions) {
				if(!permissions[perm]) throw new RangeError(`Invalid command userPermission: ${perm}`);
			}
		}
  }

  /**
   * Runs the command
   * @param {Message} message - The message object which was received from discord
   * @param {Object} args - The command's arguments
   * @abstract
   */
  async run(message, args) {
    this.client.emit('warn', 'This command has no run method: ' + this.name);
  }
}

export default FrameCommand;</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Thu Sep 16 2021 17:10:23 GMT+0200 (Středoevropský letní čas) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
